{
    "version": "0.2.0",
    "id": "ts-selection-interpolation",
    "use_case": "Daugava",
    "title": {
        "en": "Select and Interpolate Time Series"
    },
    "description": {
        "en": "This process selects time series with sufficient data for interpolation and returns continuous time series where missing values (NAs) are replaced using linear interpolation (R function zoo::na.approx). The result is a complete time series without gaps. Timeseries with insufficient data are removed. / Split data into sub-tables for each season and HELCOM_ID separately. Create a list to store sub-tables of transparency (R function 'ts_selection_interpolation')."
    },
    "jobControlOptions": ["sync-execute", "async-execute"],
    "keywords": ["daugava use case", "AquaINFRA", "ts_selection_interpolation", "R"],
    "links": [{
        "type": "text/html",
        "rel": "about",
        "title": "GitHub repo",
        "href": "https://github.com/AstraLabuce/aquainfra-usecase-Daugava",
        "hreflang": "en-US"
    }],
    "inputs": {
        "input_data": {
            "title": "Input table",
            "description": "URL to the input table containing data for selection and interpolation. This table includes grouping variables (if applicable), the year (or other time identifier) and the value columns to be interpolated. For example, use the result from mean_by_group.",
            "schema": {
                "type": "string"
            },
            "minOccurs": 1,
            "maxOccurs": 1,
            "keywords": ["table", "csv"]
        },
        "colnames_relevant": {
            "title": "Column names identifying group(s)",
            "description": "Column name(s) describing relevant values in the dataset. These columns are treated as grouping identifiers, and a combination of all specified columns will be used to define unique groups. For each group, a separate time series is analyzed and interpolated individually.",
            "schema": {
                "type": "string"
            },
            "minOccurs": 1,
            "maxOccurs": 1,
            "keywords": ["points"]
        },
        "missing_threshold_percentage": {
            "title": "Threshold for missing values",
            "description": "Threshold for the allowed percentage of missing data points (NAs). For example, a value of 40 means series with more than 40% missing data will be removed. Example = \"40\".",
            "schema": {
                "type": "number",
                "minimum": 0,
                "maximum": 100
            },
            "minOccurs": 1,
            "maxOccurs": 1,
            "keywords": ["percent"]
        },
        "colname_year": {
            "title": "Column name for time",
            "description": "The name of the column containing the year (or other time identifier, such as quarter, month, or day). Example = \"year\"",
            "schema": {
                "type": "string"
            },
            "minOccurs": 1,
            "maxOccurs": 1,
            "keywords": ["year", "column"]
        },
        "colname_value": {
            "title": "Column name for values",
            "description": "The name of the column containing the values to be considered for interpolation.",
            "schema": {
                "type": "string"
            },
            "minOccurs": 1,
            "maxOccurs": 1,
            "keywords": ["column"]
        },
        "min_data_point": {
            "title": "Minimum number of data points required",
            "description": "The minimum number of data points required in a time series for it to be included in the interpolation process. Example = \"10\".",
            "schema": {
                "type": "integer",
                "minimum": 0
            },
            "minOccurs": 1,
            "maxOccurs": 1,
            "keywords": ["point"]
        }
    },
    "outputs": {
        "interpolated_time_series": {
            "title": "Interpolated time series",
            "description": "A table containing continuous time series for each unique group defined by rel_cols, with missing values replaced by linear interpolation. Time series with insufficient data based on the missing_threshold_percentage or min_data_point are excluded.",
            "schema": {
                "type": "object",
                "contentMediaType": "application/json"
            }
        }
    },
    "example": {
        "inputs": {
            "input_data": "mean_by_group.csv",
            "colnames_relevant": "group_labels,HELCOM_ID",
            "missing_threshold_percentage": "40",
            "colname_year": "Year_adj_generated",
            "colname_value": "Secchi_m_mean_annual",
            "min_data_point": "10"
        }
    }
}
